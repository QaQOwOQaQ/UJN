# 第十章：结构和联合

结构体很重要，在后续的链表、二叉树，`OJ` 题目的数据存储等都广泛应用到。

## 本章总结及注意点

![1](https://raw.githubusercontent.com/Y-puyu/picture/main/images/20201225144726.png)

![2](https://raw.githubusercontent.com/Y-puyu/picture/main/images/20201227192116.png)

![3](https://raw.githubusercontent.com/Y-puyu/picture/main/images/20201225145244.png)

---

## 部分课后习题解答

### 10.10 问题

1. 成员可以是不同类型，其按名称来访问，并非连续存储，有边界要求。而数组元素必须是同一类型，按下标访问，连续存储，边界对其元素。

2. 结构名为一个标量，作右值时，表示存储在结构中的值，作左值时，表示结构存储的内存位置。数组名为一个常量指针，其仅能作右值表示指向数组第一个元素的指针，不可以作左值。

3. 以往写的大多都是 `typedef` 多一点。见参考答案：

    ![4](https://raw.githubusercontent.com/Y-puyu/picture/main/images/20201225150617.png)

4. `abc` 是结构标记，而不是变量的名称。赋值语句非法。

5. `abc` 是类型名，而不是变量名。赋值语句是非法的。

6. `x = { 3, "hello" };`，`c` 的值可有可无，`x` 存储与静态内存中。

7. 首先这个结构体大小为 12 字节。很不错的一道题啊！！！

   `nodes[3].c` 是**该结构体数组的起始地址**，是 200。

    `*nodes` 是`首元素`，即第一个结构。

    `npp` 是真滴秀...直接就是 216。200+4*4 = 216。

    ![5](https://raw.githubusercontent.com/Y-puyu/picture/main/images/20201225151938.png)

8. 2个、6个。

9. 不确定字段是从右向左还是从左向右分配。字段与整形位数相关。如果字段太大，无法存储，不确定其是否会侵占下一个字段或者下一个字。

10. 两种均正确，取决于编译器分配字段的方式。见参考答案：

    ![6](https://raw.githubusercontent.com/Y-puyu/picture/main/images/20201225152523.png)

11. 保证字段不溢出是很不错的操作！基本和书前所讲一致。见参考答案：

    ![7](https://raw.githubusercontent.com/Y-puyu/picture/main/images/20201225152659.png)

12. 2 或者 -2，取决于编译器。

13. 联合当做结构用，前两个值为垃圾，最后一个打印正确。

14. 啥意思，题目说的。参考答案：用于存储数据的同一成员也必须用于读取数据。

15. 占空间。

### 10.11 编程练习

1. 很简单的数据存储设计。见答案：

    ![8](https://raw.githubusercontent.com/Y-puyu/picture/main/images/20201225154054.png)

2. 见 `demo01.c`。读题就能发现，三种情况同时只会有一个发生，那么就需要采用**联合实现变体记录的方式来优化数据结构设计**。

3. 取决于编译器分配字段的方向。见 `demo02.c`。

### 随笔

结构体用的很广泛，它体现了一种数据的存储设计的方式，针对不同类型的数据采用不同的方式进行组织存储，这对于一个程序设计开发人员而言无疑是重要的。当然，里面也存在很多很多技巧，需要日后不断写代码加以巩固。当然，在 `C++` 中更是有 `class` 这个概念，模块化是非常重要的思想！

### 疑问

1. 变体记录的灵活应用，掌握度不够。
